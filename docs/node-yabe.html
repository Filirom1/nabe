<!DOCTYPE html>    <html>  <head>    <title>node-yabe.js</title>    <meta http-equiv="content-type" content="text/html; charset=UTF-8">    <link rel="stylesheet" media="all" href="docco.css" />  </head>  <body>    <div id="container">      <div id="background"></div>              <div id="jump_to">          Jump To &hellip;          <div id="jump_wrapper">            <div id="jump_page">                                              <a class="source" href="config.html">                  config.html                </a>                                              <a class="source" href="model/posts.html">                  model/posts.html                </a>                                              <a class="source" href="node-yabe.html">                  node-yabe.html                </a>                                              <a class="source" href="renderer.html">                  renderer.html                </a>                                              <a class="source" href="routes.html">                  routes.html                </a>                                              <a class="source" href="util.html">                  util.html                </a>                          </div>          </div>        </div>            <table cellpadding="0" cellspacing="0">        <thead>          <tr>            <th class="docs">              <h1>                node-yabe.js              </h1>            </th>            <th class="code">            </th>          </tr>        </thead>        <tbody>                                  <tr id="section-1">              <td class="docs">                <div class="pilwrap">                  <a class="pilcrow" href="#section-1">&#182;</a>                </div>                <p><strong>node-yabe</strong> is a git-powered, minimalist blog engine for coders.</p>

<p>A simple (but yet another) blog engine written in node. It basically 
takes the articles/ folder full of markdown post and serves them as a website.</p>

<p>Posts are passed through <a href="http://daringfireball.net/projects/markdown/syntax">Markdown</a>, 
and snippets of code is passed through <a href="http://code.google.com/p/google-code-prettify/">Prettify</a> 
syntax highlighting. This page is the result of running <a href="http://jashkenas.github.com/docco/">Docco</a> 
against its own source files.</p>

<p>The <a href="http://github.com/mklabs/node-yabe">source for this blog engine</a> is available on GitHub.</p>

<p>This project respectfully uses code from and thanks the authors of:</p>

<ul>
<li><a href="https://github.com/senchalabs/connect">connect</a></li>
<li><a href="https://github.com/creationix/wheat">wheat</a></li>
<li><a href="https://github.com/substack/node-findit">findit</a></li>
<li><a href="https://github.com/isaacs/github-flavored-markdown">github-flavored-markdown</a></li>
<li><a href="https://github.com/creationix/node-git">git-fs</a></li>
<li><a href="https://github.com/jquery/jquery-global">jquery-global</a></li>
<li><a href="https://github.com/kof/node-jqtpl">jqtpl</a></li>
<li><a href="https://github.com/visionmedia/js-yaml">yaml</a></li>
<li><a href="https://github.com/paulirish/html5-boilerplate-server-configs/blob/master/node.js">h5b-server-config for node</a></li>
</ul>              </td>              <td class="code">                <div class="highlight"><pre><span class="pln"><br /></span></pre></div>              </td>            </tr>                                  <tr id="section-2">              <td class="docs">                <div class="pilwrap">                  <a class="pilcrow" href="#section-2">&#182;</a>                </div>                <h2>Connect server</h2>

<p>This file comes with a basic server configuration and is based on 
<a href="https://github.com/paulirish/html5-boilerplate-server-configs/blob/master/node.js">h5b-server-config for node</a></p>              </td>              <td class="code">                <div class="highlight"><pre><span class="kwd">var</span><span class="pln"> mime </span><span class="pun">=</span><span class="pln"> </span><span class="kwd">require</span><span class="pun">(</span><span class="str">'mime'</span><span class="pun">),</span><span class="pln"><br />connect </span><span class="pun">=</span><span class="pln"> </span><span class="kwd">require</span><span class="pun">(</span><span class="str">'connect'</span><span class="pun">),</span><span class="pln"><br />path </span><span class="pun">=</span><span class="pln"> </span><span class="kwd">require</span><span class="pun">(</span><span class="str">'path'</span><span class="pun">),</span><span class="pln"><br /><br /></span></pre></div>              </td>            </tr>                                  <tr id="section-3">              <td class="docs">                <div class="pilwrap">                  <a class="pilcrow" href="#section-3">&#182;</a>                </div>                <p><strong>configuration module, more on this <a href="config.html">here</a></strong></p>              </td>              <td class="code">                <div class="highlight"><pre><span class="pln">config </span><span class="pun">=</span><span class="pln"> </span><span class="kwd">require</span><span class="pun">(</span><span class="str">'./config'</span><span class="pun">),</span><span class="pln"><br /><br /></span></pre></div>              </td>            </tr>                                  <tr id="section-4">              <td class="docs">                <div class="pilwrap">                  <a class="pilcrow" href="#section-4">&#182;</a>                </div>                <p><strong>router module, more on this <a href="routes.html">here</a></strong></p>              </td>              <td class="code">                <div class="highlight"><pre><span class="pln">routes </span><span class="pun">=</span><span class="pln"> </span><span class="kwd">require</span><span class="pun">(</span><span class="str">'./routes'</span><span class="pun">);</span><span class="pln"><br /><br /></span></pre></div>              </td>            </tr>                                  <tr id="section-5">              <td class="docs">                <div class="pilwrap">                  <a class="pilcrow" href="#section-5">&#182;</a>                </div>                <h3>Mimes configuration</h3>

<p>Define early so that connects sees them</p>              </td>              <td class="code">                <div class="highlight"><pre><span class="pln">mime</span><span class="pun">.</span><span class="pln">define</span><span class="pun">({</span><span class="pln"><br />&nbsp; &nbsp; </span><span class="str">'application/x-font-woff'</span><span class="pun">:</span><span class="pln"> </span><span class="pun">[</span><span class="str">'woff'</span><span class="pun">],</span><span class="pln"><br />&nbsp; &nbsp; </span><span class="str">'image/vnd.microsoft.icon'</span><span class="pun">:</span><span class="pln"> </span><span class="pun">[</span><span class="str">'ico'</span><span class="pun">],</span><span class="pln"><br />&nbsp; &nbsp; </span><span class="str">'image/webp'</span><span class="pun">:</span><span class="pln"> </span><span class="pun">[</span><span class="str">'webp'</span><span class="pun">],</span><span class="pln"><br />&nbsp; &nbsp; </span><span class="str">'text/cache-manifest'</span><span class="pun">:</span><span class="pln"> </span><span class="pun">[</span><span class="str">'manifest'</span><span class="pun">],</span><span class="pln"><br />&nbsp; &nbsp; </span><span class="str">'text/x-component'</span><span class="pun">:</span><span class="pln"> </span><span class="pun">[</span><span class="str">'htc'</span><span class="pun">],</span><span class="pln"><br />&nbsp; &nbsp; </span><span class="str">'application/x-chrome-extension'</span><span class="pun">:</span><span class="pln"> </span><span class="pun">[</span><span class="str">'crx'</span><span class="pun">]</span><span class="pln"><br /></span><span class="pun">});</span><span class="pln"><br /><br /></span></pre></div>              </td>            </tr>                                  <tr id="section-6">              <td class="docs">                <div class="pilwrap">                  <a class="pilcrow" href="#section-6">&#182;</a>                </div>                <h3>Create and expose the server</h3>              </td>              <td class="code">                <div class="highlight"><pre><span class="pln"><br /></span><span class="kwd">module</span><span class="pun">.</span><span class="pln">exports </span><span class="pun">=</span><span class="pln"> connect</span><span class="pun">.</span><span class="pln">createServer</span><span class="pun">(</span><span class="pln"><br /></span></pre></div>              </td>            </tr>                                  <tr id="section-7">              <td class="docs">                <div class="pilwrap">                  <a class="pilcrow" href="#section-7">&#182;</a>                </div>                <p>good ol'apache like logging
you can customize how the log looks:
http://senchalabs.github.com/connect/middleware-logger.html</p>              </td>              <td class="code">                <div class="highlight"><pre><span class="pln">&nbsp; connect</span><span class="pun">.</span><span class="pln">logger</span><span class="pun">(),</span><span class="pln"><br />&nbsp; <br /></span></pre></div>              </td>            </tr>                                  <tr id="section-8">              <td class="docs">                <div class="pilwrap">                  <a class="pilcrow" href="#section-8">&#182;</a>                </div>                <p>call to trigger routes</p>              </td>              <td class="code">                <div class="highlight"><pre><span class="pln">&nbsp; connect</span><span class="pun">.</span><span class="pln">router</span><span class="pun">(</span><span class="pln">routes</span><span class="pun">),</span><span class="pln"><br /><br /></span></pre></div>              </td>            </tr>                                  <tr id="section-9">              <td class="docs">                <div class="pilwrap">                  <a class="pilcrow" href="#section-9">&#182;</a>                </div>                <p>set to ./ to find the boilerplate files
change if you have an htdocs dir or similar
maxAge is set to one month</p>              </td>              <td class="code">                <div class="highlight"><pre><span class="pln">&nbsp; connect</span><span class="pun">.</span><span class="kwd">static</span><span class="pun">(</span><span class="pln">path</span><span class="pun">.</span><span class="pln">join</span><span class="pun">(</span><span class="pln">process</span><span class="pun">.</span><span class="pln">cwd</span><span class="pun">(),</span><span class="pln"> config</span><span class="pun">.</span><span class="pln">themeDir</span><span class="pun">,</span><span class="pln"> config</span><span class="pun">.</span><span class="pln">theme</span><span class="pun">,</span><span class="pln"> </span><span class="str">'public'</span><span class="pun">),</span><span class="pln"> </span><span class="pun">{</span><span class="pln"><br />&nbsp; &nbsp; <br /></span></pre></div>              </td>            </tr>                                  <tr id="section-10">              <td class="docs">                <div class="pilwrap">                  <a class="pilcrow" href="#section-10">&#182;</a>                </div>                <p>set you cache maximum age, in milisecconds.
if you don't use cache break use a smaller value</p>              </td>              <td class="code">                <div class="highlight"><pre><span class="pln">&nbsp; &nbsp; maxAge</span><span class="pun">:</span><span class="pln"> </span><span class="lit">1000</span><span class="pln"> </span><span class="pun">*</span><span class="pln"> </span><span class="lit">60</span><span class="pln"> </span><span class="pun">*</span><span class="pln"> </span><span class="lit">60</span><span class="pln"> </span><span class="pun">*</span><span class="pln"> </span><span class="lit">24</span><span class="pln"> </span><span class="pun">*</span><span class="pln"> </span><span class="lit">30</span><span class="pln"><br />&nbsp; </span><span class="pun">})</span><span class="pln"><br /></span><span class="pun">);</span><span class="pln"><br /><br /></span></pre></div>              </td>            </tr>                                  <tr id="section-11">              <td class="docs">                <div class="pilwrap">                  <a class="pilcrow" href="#section-11">&#182;</a>                </div>                <h3>Error handling</h3>              </td>              <td class="code">                <div class="highlight"><pre><span class="pln"><br /></span></pre></div>              </td>            </tr>                                  <tr id="section-12">              <td class="docs">                <div class="pilwrap">                  <a class="pilcrow" href="#section-12">&#182;</a>                </div>                <p>this is a failsafe, it will catch the error silently and logged it the console.
While this works, you should really try to catch the errors with a try/catch block
more on this <a href="http://nodejs.org/docs/v0.4.7/api/process.html#event_uncaughtException_">here</a></p>              </td>              <td class="code">                <div class="highlight"><pre><span class="pln">process</span><span class="pun">.</span><span class="pln">on</span><span class="pun">(</span><span class="str">'uncaughtException'</span><span class="pun">,</span><span class="pln"> </span><span class="kwd">function</span><span class="pln"> </span><span class="pun">(</span><span class="pln">err</span><span class="pun">)</span><span class="pln"> </span><span class="pun">{</span><span class="pln"><br />&nbsp; &nbsp;console</span><span class="pun">.</span><span class="pln">log</span><span class="pun">(</span><span class="str">'Caught exception: '</span><span class="pln"> </span><span class="pun">+</span><span class="pln"> err</span><span class="pun">);</span><span class="pln"><br />&nbsp; &nbsp;console</span><span class="pun">.</span><span class="pln">error</span><span class="pun">(</span><span class="pln">err</span><span class="pun">);</span><span class="pln"><br /></span><span class="pun">});</span><span class="pln"><br /><br /><br /></span></pre></div>              </td>            </tr>                  </tbody>      </table>    </div>  </body>  </html>