<!DOCTYPE html>
<html>
<head>
  <meta charset="UTF-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1">
  
  <link rel="stylesheet" type="text/css" href="/css/h5b.css">
  <link rel="stylesheet" type="text/css" href="/css/nabe.css">
  <link rel="stylesheet" type="text/css" href="/css/nabe.editor.css">
  <link rel="stylesheet" type="text/css" href="/css/nabe.dialog.css">
  <title>admin - list of posts</title>
</head>
<body>

  <div class="nabe-admin">
    <div class="navbar-container">
      <h1>Admin</h1>
      <ul>
        <li>
          <form><input type="search" /></form>
        </li>
        <li class="navbar-item-selected"><a href="/admin">Posts</a></li>
        <li><a href="/admin">Pages (todo)</a></li>
        <li><a href="/admin">Configuration (todo)</a></li>
      </ul>
    </div>
    
    <div class="nabe-mainview">
      <div class="nabe-admin-header">
        <h1>admin <strong>list of posts</strong></h1>
      </div>
      <div class="nabe-admin-summary">
        <p>Posts are the entries that display in reverse chronological order on your home page.</p>
        <p>To edit a post, check the list below and click on the file you'll want to edit.</p>
      </div>
         
      <ul class="nabe-buttons">
        <li><a href="/admin/create" class="nabe-editor-bt">New Post</a></li>
      </ul>
      
      <table>
        <thead><tr><th>Name</th><th>Date</th><th>Author</th><th>Path</th></tr></thead>
        <tbody>
          {{each(index, article) articles}}
          <tr>
            <td>${article.title} <span class="small"><a href="/article/${article.name}">(link)</a></span></td>
            <td>${article.date}</td>
            <td>${article.author}</td>
            <td><a href="/admin/edit/${article.name}">${article.name}</a></td>
          </tr>
          {{/each}}
        </tbody>
      </table>
    </div>
  </div>

  <script src="/js/libs/jquery.js"></script>
  <script src="/js/libs/jquery.tmpl.js"></script>
  <script src="/js/libs/showdown.js"></script>
  <script src="/js/libs/ace.js"></script>
  <script src="/js/langs/mode-markdown.js"></script>
  <script src="/js/themes/theme-all.js"></script>

  <script src="/js/nabe.dialog.js"></script>
  <script src="/js/nabe.editor.js"></script>

  <script>
  $(function(){

  
    var table = $('table'),
    tr = table.find('tr'),
    newpost = $('.nabe-buttons').find('a[href="/admin/create"]');
    dialog = $(document.body).nabeDialog().data('nabeDialog');
  
    table.delegate('tbody tr', 'hover', function() {
      tr.removeClass('hover');
      $(this).addClass('hover');
    });
    
    dialog.on('submitDialog', function(e, seriaform) {
      document.location = '/admin/create/' + seriaform.match(/file=(.+)/)[1];
    });
    
    newpost.bind('click', function() {
      dialog.open({
        title: 'Create new post',
        markup: '<form><input type="text" name="file" autocomplete="off" placeholder="Create new post" /><form>'
      });
      return false;
    });
    
  });
  </script>

</body>
</html>